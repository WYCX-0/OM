{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../software/Hbuilder/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"brand-container\">\r\n\t\t\t<text class=\"brand-text\">运</text>\r\n\t\t\t<text class=\"brand-text accent\">维</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-box\">\r\n\t\t\t<view class=\"input-item\">\r\n\t\t\t\t<input type=\"text\" placeholder=\"请输入工号\" v-model=\"engineerNo\" class=\"input\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"input-item\">\r\n\t\t\t\t<input type=\"password\" placeholder=\"请输入密码\" v-model=\"password\" class=\"input\" />\r\n\t\t\t</view>\r\n\t\t\t<button class=\"submit-btn\" @click=\"handleLogin\">登录</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\twebsocketObj\r\n\t} from '../../utils/websocket';\r\n\timport {\r\n\t\tbaseConfig\r\n\t} from '../../utils/config';\r\n\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tengineerNo: '',\r\n\t\t\t\tpassword: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleLogin() {\r\n\t\t\t\tif (!this.engineerNo || !this.password) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写完整登录信息',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: `${baseConfig.baseUrl}/engineer/login`,\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tengineerNo: this.engineerNo,\r\n\t\t\t\t\t\tpassword: this.password\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data.code === 200) {\r\n\t\t\t\t\t\t\tuni.setStorageSync('userInfo', {\r\n\t\t\t\t\t\t\t\tid: res.data.data.id,\r\n\t\t\t\t\t\t\t\tname: res.data.data.name\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tuni.setStorageSync('token', res.data.data.token);\r\n\t\t\t\t\t\t\tconsole.log(res.data.data.token);\r\n\t\t\t\t\t\t\tconst wsURL = `${baseConfig.wsBaseUrl}/ws/engineer/${res.data.data.id}`;\r\n\t\t\t\t\t\t\twebsocketObj.connect(wsURL, res.data.data.token);\r\n\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '登录成功',\r\n\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.msg || '登录失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('登录请求失败', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '网络错误，请稍后重试',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.container {\r\n\t\tpadding: 0;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.brand-container {\r\n\t\ttext-align: center;\r\n\t\tmargin: 10vh 0 5vh;\r\n\t\tanimation: fadeInDown 0.6s;\r\n\t}\r\n\r\n\t.brand-text {\r\n\t\tfont-size: 8vw;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #333;\r\n\t\tletter-spacing: 1vw;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.brand-text.accent {\r\n\t\tcolor: #4A90E2;\r\n\t\tmargin-left: 1vw;\r\n\t}\r\n\r\n\t.brand-text::after {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tbottom: -1vh;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\twidth: 60%;\r\n\t\theight: 0.5vh;\r\n\t\tbackground: linear-gradient(90deg, transparent, #4A90E2, transparent);\r\n\t}\r\n\r\n\t.avatar-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tmargin: 5vh 0;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 25vw;\r\n\t\theight: 25vw;\r\n\t\tborder-radius: 1vw;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.form-box {\r\n\t\tpadding: 5vw;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder-radius: 3vw;\r\n\t\tbox-shadow: 0 0 2vw rgba(0, 0, 0, 0.1);\r\n\t\tmargin: 0 5vw;\r\n\t\twidth: 80vw;\r\n\t\tmax-width: 600rpx;\r\n\t}\r\n\r\n\t.input-item {\r\n\t\tmargin-bottom: 3vh;\r\n\t\tborder-bottom: 1px solid #EFEFEF;\r\n\t\tpadding-bottom: 2vh;\r\n\t}\r\n\r\n\t.input {\r\n\t\theight: 8vh;\r\n\t\tfont-size: 4vw;\r\n\t\tpadding: 0 1vw;\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\theight: 10vh;\r\n\t\tbackground-color: #4A90E2;\r\n\t\tcolor: #FFFFFF;\r\n\t\tfont-size: 4.5vw;\r\n\t\tborder-radius: 5vh;\r\n\t\tmargin-top: 5vh;\r\n\t\tbox-shadow: 0 0 2vw rgba(74, 144, 226, 0.2);\r\n\t\ttransition: background-color 0.3s ease;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.submit-btn:hover {\r\n\t\tbackground-color: #357ABD;\r\n\t}\r\n\r\n\t.register-link {\r\n\t\ttext-align: center;\r\n\t\tmargin-top: 3vh;\r\n\t\tfont-size: 3.5vw;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t@keyframes fadeInDown {\r\n\t\tfrom {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(-2vh);\r\n\t\t}\r\n\r\n\t\tto {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/app/om-engineer/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","baseConfig","websocketObj"],"mappings":";;;;AA4BC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,YAAY;AAAA,MACZ,UAAU;AAAA;EAEX;AAAA,EACD,SAAS;AAAA,IACR,cAAc;AACb,UAAI,CAAC,KAAK,cAAc,CAAC,KAAK,UAAU;AACvCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD;AAAA,MACD;AAEAA,oBAAAA,MAAI,QAAQ;AAAA,QACX,KAAK,GAAGC,wBAAW,OAAO;AAAA,QAC1B,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,YAAY,KAAK;AAAA,UACjB,UAAU,KAAK;AAAA,QACf;AAAA,QACD,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,KAAK,SAAS,KAAK;AAC1BD,0BAAG,MAAC,eAAe,YAAY;AAAA,cAC9B,IAAI,IAAI,KAAK,KAAK;AAAA,cAClB,MAAM,IAAI,KAAK,KAAK;AAAA,YACrB,CAAC;AACDA,0BAAG,MAAC,eAAe,SAAS,IAAI,KAAK,KAAK,KAAK;AAC/CA,gCAAY,MAAA,OAAA,+BAAA,IAAI,KAAK,KAAK,KAAK;AAC/B,kBAAM,QAAQ,GAAGC,aAAU,WAAC,SAAS,gBAAgB,IAAI,KAAK,KAAK,EAAE;AACrEC,4BAAY,aAAC,QAAQ,OAAO,IAAI,KAAK,KAAK,KAAK;AAE/CF,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACP,CAAC;AACDA,0BAAAA,MAAI,SAAS;AAAA,cACZ,KAAK;AAAA,YACN,CAAC;AAAA,iBACK;AACNA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,KAAK,OAAO;AAAA,cACvB,MAAM;AAAA,YACP,CAAC;AAAA,UACF;AAAA,QACA;AAAA,QACD,MAAM,CAAC,QAAQ;AACdA,wBAAc,MAAA,MAAA,SAAA,+BAAA,UAAU,GAAG;AAC3BA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AAAA,QACF;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;;;;;;;;;;;;ACrFF,GAAG,WAAW,eAAe;"}